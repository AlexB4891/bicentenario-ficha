<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Alex Bajaña">
<meta name="author" content="Paúl Yungán">
<meta name="author" content="Kathia Pinzón">

<title>Indice de adopción de Tecnologías de la Información y Comunicación (TICS)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="ficha_metogologica_files/libs/clipboard/clipboard.min.js"></script>
<script src="ficha_metogologica_files/libs/quarto-html/quarto.js"></script>
<script src="ficha_metogologica_files/libs/quarto-html/popper.min.js"></script>
<script src="ficha_metogologica_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="ficha_metogologica_files/libs/quarto-html/anchor.min.js"></script>
<link href="ficha_metogologica_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="ficha_metogologica_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="ficha_metogologica_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="ficha_metogologica_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="ficha_metogologica_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Indice de adopción de Tecnologías de la Información y Comunicación (TICS)</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Authors</div>
    <div class="quarto-title-meta-contents">
             <p>Alex Bajaña </p>
             <p>Paúl Yungán </p>
             <p>Kathia Pinzón </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="contexto" class="level1">
<h1>Contexto</h1>
<p>Las Tecnologías de la Información y Comunicación (TICs) comprenden todo tipo de software y hardware utilizado para crear, manipular, y comunicar información en sus diversas formas. Es bien conocido, sobre todo a partir de la pandemia de COVID-19, que estas desempeñan un papel importante en la consecución del desarrollo económico y social en las economías: facilitan la generación de innovaciones, mejoran la calidad y eficiencia en la toma de decisiones, incrementan la demanda para las empresas y reducen sus costos, y a su vez impulsan diversas formas de empleo. La presente investigación aporta en el estudio de esta temática, mediante la generación de un “Índice de adopción de TICs” para el caso de Ecuador, que constituye una medición del nivel de adopción de TICs desde la perspectiva de las empresas.</p>
<p>Se utilizó la información de “Uso de TICs” de la Encuesta Nacional Empresarial (ENESEM), para los años entre 2018 y 2021; la población analizada se conforma por empresas medianas y grandes de los sectores comercio, construcción, manufactura, minería y servicios. La determinación del índice se realiza mediante la metodología de Análisis Factorial Múltiple (realizada en 2 etapas, considerando distintas dimensiones de evaluación de adopción de TICs), y ésta se aplica de manera que es posible evaluar la evolución intertemporal del índice.</p>
<p>Las 4 grandes dimensiones consideradas en la primera etapa son: i) inversión en formas de TICs, ii) cultura respecto del uso de TICs, iii) prácticas de gestión en torno a TICs, y iv) calidad de TICs implementadas. Los resultados muestran una caracterización detallada del nivel de adopción de TICs en el país, tanto antes como después de la pandemia de COVID-19. Durante todos los años analizados, se evidencian mayores valores promedio del índice en el sector Servicios, seguido por Comercio, Manufactura, Minería y Construcción; adicionalmente, las provincias con mayores niveles del índice han variado ligeramente entre 2018 y 2021, ubicando entre estas a Guayas, Pichincha, Tungurahua, Imbabura, Galápagos, Napo y Zamora Chinchipe.</p>
<p>Se observa, además, que la pandemia de COVID-19 trajo mejoras importantes pero heterogéneas en cuanto a adopción de TICs: entre 2019 y 2021, mientras que en Servicios y Comercio el índice incrementó en 34% y 29%, respectivamente, en Manufactura, Construcción y Minería incrementó en 22%, 8%, y 16% respectivamente. Finalmente, se observa una correlación positiva entre los niveles de adopción de TICs de las empresas y sus niveles de ventas en cada período.</p>
<section id="objetivo-del-índice" class="level3">
<h3 class="anchored" data-anchor-id="objetivo-del-índice">Objetivo del Índice:</h3>
<p>Evaluar y comparar la adopción y uso de tecnologías de información y comunicación entre empresas medianas y grandes en Ecuador, considerando las dinámicas pre y post pandemia de COVID-19.</p>
</section>
<section id="universo-de-estudio" class="level3">
<h3 class="anchored" data-anchor-id="universo-de-estudio">Universo de Estudio:</h3>
<p>Empresas medianas y grandes clasificadas según el Código Internacional Industrial Uniforme (CIIU) Revisión 4, excluyendo sectores de agricultura, sector público y actividades extraterritoriales.</p>
</section>
<section id="periodo-de-estudio" class="level3">
<h3 class="anchored" data-anchor-id="periodo-de-estudio">Periodo de Estudio:</h3>
<p>Datos anuales desde 2018 hasta 2021. El año 2022 representa un desafio para la construcción del indice con esta fuente de información debido a cambios en el año de referencia para el calculo del tamaño de empresa y por ende en el calculo de los factores de expansión lo cual dificulta la comparabilidad entre este año y los anteriores.</p>
</section>
<section id="fuente-de-datos" class="level3">
<h3 class="anchored" data-anchor-id="fuente-de-datos">Fuente de Datos:</h3>
<p>Módulo TICS Encuesta Nacional Estructural Empresarial (ENESEM) realizada por el Instituto Nacional de Estadística y Censos (INEC).</p>
<p><a href="https://www.ecuadorencifras.gob.ec/encuesta-a-empresas/"></a></p>
</section>
<section id="variables-clave" class="level3">
<h3 class="anchored" data-anchor-id="variables-clave">Variables Clave:</h3>
<p>Para construir un indicador de Adopción de TICS en base a la metodología de factores multiples se consideraron los siguientes grupos de variables:</p>
<ol type="1">
<li><strong>Inversión en TIC’s:</strong> Gastos en tecnologías de la información y comunicación.</li>
<li><strong>Uso de TIC’s en compras y ventas:</strong> Aplicación de TIC’s en operaciones comerciales.</li>
<li><strong>Cultura sobre el uso de TIC’s:</strong> Valores y prácticas relacionadas con el uso de TIC’s.</li>
<li><strong>Calidad del uso de TIC’s:</strong> Efectividad y eficiencia del uso de TIC’s.</li>
<li><strong>Prácticas de gestión en torno a TIC’s:</strong> Estrategias y políticas para la gestión de TIC’s.</li>
</ol>
<p>A continuación se muestra la cantidad y tipo de variable de las variables que componen cada uno de estos 5 grupos:</p>
<div>
<table class="gt_table table" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_col_headings">
<th id="Tipo de variable" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="color: #A9A9A9; font-family: 'Source Sans Pro'; text-transform: uppercase" scope="col">Tipo de variable</th>
<th id="Número de variables" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" style="color: #A9A9A9; font-family: 'Source Sans Pro'; text-transform: uppercase" scope="col">Número de variables</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd gt_group_heading_row">
<td colspan="2" id="Inversión en formas de TIC's" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">Inversión en formas de TIC's</td>
</tr>
<tr class="even gt_row_group_first">
<td class="gt_row gt_left" headers="Inversión en formas de TIC's  Tipo de variable" style="font-family: 'Source Sans Pro'; font-weight: 400">Numérica</td>
<td class="gt_row gt_right" headers="Inversión en formas de TIC's  Número de variables" style="font-family: 'Source Sans Pro'; font-weight: 400">5</td>
</tr>
<tr class="odd gt_group_heading_row">
<td colspan="2" id="Uso de TIC's en compras y ventas" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">Uso de TIC's en compras y ventas</td>
</tr>
<tr class="even gt_row_group_first">
<td class="gt_row gt_left" headers="Uso de TIC's en compras y ventas  Tipo de variable" style="font-family: 'Source Sans Pro'; font-weight: 400">Numérica</td>
<td class="gt_row gt_right" headers="Uso de TIC's en compras y ventas  Número de variables" style="font-family: 'Source Sans Pro'; font-weight: 400">8</td>
</tr>
<tr class="odd gt_group_heading_row">
<td colspan="2" id="Cultura sobre el uso de TIC's" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">Cultura sobre el uso de TIC's</td>
</tr>
<tr class="even gt_row_group_first">
<td class="gt_row gt_left" headers="Cultura sobre el uso de TIC's  Tipo de variable" style="font-family: 'Source Sans Pro'; font-weight: 400">Categórica</td>
<td class="gt_row gt_right" headers="Cultura sobre el uso de TIC's  Número de variables" style="font-family: 'Source Sans Pro'; font-weight: 400">4</td>
</tr>
<tr class="odd gt_group_heading_row">
<td colspan="2" id="Cultura sobre el uso de TICS" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">Cultura sobre el uso de TICS</td>
</tr>
<tr class="even gt_row_group_first">
<td class="gt_row gt_left" headers="Cultura sobre el uso de TICS  Tipo de variable" style="font-family: 'Source Sans Pro'; font-weight: 400">Numérica</td>
<td class="gt_row gt_right" headers="Cultura sobre el uso de TICS  Número de variables" style="font-family: 'Source Sans Pro'; font-weight: 400">6</td>
</tr>
<tr class="odd gt_group_heading_row">
<td colspan="2" id="Calidad de uso de TIC's" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">Calidad de uso de TIC's</td>
</tr>
<tr class="even gt_row_group_first">
<td class="gt_row gt_left" headers="Calidad de uso de TIC's  Tipo de variable" style="font-family: 'Source Sans Pro'; font-weight: 400">Categórica</td>
<td class="gt_row gt_right" headers="Calidad de uso de TIC's  Número de variables" style="font-family: 'Source Sans Pro'; font-weight: 400">49</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Calidad de uso de TIC's  Tipo de variable" style="font-family: 'Source Sans Pro'; font-weight: 400">Numérica</td>
<td class="gt_row gt_right" headers="Calidad de uso de TIC's  Número de variables" style="font-family: 'Source Sans Pro'; font-weight: 400">6</td>
</tr>
<tr class="even gt_group_heading_row">
<td colspan="2" id="Prácticas de gestión en torno a TIC's" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">Prácticas de gestión en torno a TIC's</td>
</tr>
<tr class="odd gt_row_group_first">
<td class="gt_row gt_left" headers="Prácticas de gestión en torno a TIC's  Tipo de variable" style="font-family: 'Source Sans Pro'; font-weight: 400">Categórica</td>
<td class="gt_row gt_right" headers="Prácticas de gestión en torno a TIC's  Número de variables" style="font-family: 'Source Sans Pro'; font-weight: 400">10</td>
</tr>
</tbody>
</table>


</div>
</section>
<section id="metodología-de-análisis" class="level3">
<h3 class="anchored" data-anchor-id="metodología-de-análisis">Metodología de Análisis:</h3>
<ul>
<li><p><strong>Análisis Factorial Múltiple (AFM):</strong> Combinación de Análisis de Componentes Principales (ACP) para datos métricos y Análisis de Correspondencias Múltiples (ACM) para datos categóricos.</p></li>
<li><p><strong>Codificación de Variables:</strong> Conversión de variables categóricas en formatos binarios.</p></li>
<li><p><strong>Normalización:</strong> Estandarización de variables cuantitativas para igualar la escala y el impacto.</p></li>
<li><p><strong>Construcción del Índice:</strong> Ponderación de componentes basada en la varianza explicada y relevancia estratégica.</p></li>
<li><p><strong>Normalización del Índice:</strong> Escalado del índice final a una escala de 0 a 1, donde 0 representa la mínima adopción y 1 la máxima adopción observada en la muestra.</p></li>
</ul>
<section id="procedimientos-estadísticos" class="level4">
<h4 class="anchored" data-anchor-id="procedimientos-estadísticos">Procedimientos Estadísticos:</h4>
<ul>
<li><strong>Selección de Factores:</strong> Retención de factores que expliquen al menos el 75% de la variabilidad total.</li>
<li><strong>Ponderación de Factores:</strong> Utilización de la inercia explicada por cada tabla en el AFM para asignar pesos a los factores.</li>
<li><strong>Integración de Factores:</strong> Agregación de vectores propios normalizados para formar el índice compuesto.</li>
</ul>
</section>
<section id="construcción-del-índice" class="level4">
<h4 class="anchored" data-anchor-id="construcción-del-índice">Construcción del índice</h4>
<p>Para la construcción seguimos los siguientes pasos: 1. Empleamos el Análisis de Factores Múltiples (MFA) con los datos de las empresas en el periodo 2018-2021 2. El indicador sigue la siguiente formula</p>
<p><span class="math display">\[Índice_{s} = \sum_{g = 1}^{5}\sum_{k_s = 1}^{K_s} \gamma_{gk_s}\times Dim_{gk_s}\]</span> Donde:</p>
<ul>
<li><span class="math inline">\(s\)</span> indica el sector de actividad.</li>
<li><span class="math inline">\(K_s\)</span> indica el número de dimensiones derivadas del MFA que capturan el 75% de la varianza en cada sector <span class="math inline">\(s\)</span></li>
<li><span class="math inline">\(g\)</span> son los grupos de variables definidos para el MFA</li>
<li><span class="math inline">\(Dim_{gk_s}\)</span> La proyección <span class="math inline">\(k_s\)</span> para el grupo <span class="math inline">\(g\)</span></li>
<li><span class="math inline">\(\gamma_{gk_s}\)</span> El valor propio asociado a la proyección <span class="math inline">\(k_s\)</span></li>
</ul>
<p>Llevamos el indicador a escala (0,1) con la siguiente formula:</p>
<p><span class="math display">\[
z_{is} = \frac{I_{is} - min(I_{s})}{max(I_{s}) - min(I_{s})}
\]</span> Donde:</p>
<ul>
<li><span class="math inline">\(I_{is}\)</span> indica el valor del indicador para la empresa <span class="math inline">\(i\)</span> del sector de actividad <span class="math inline">\(s\)</span></li>
<li><span class="math inline">\(z_{is}\)</span> indica el valor normalizado de este indicador</li>
<li>Esta fórmula no altera la distribución del indicador</li>
<li>El valor de 0 indica un mínimo de adopción TIC’s mientras que el valor de 1 el nivel máximo de adopción de TIC’s (en la muestra)</li>
</ul>
</section>
</section>
<section id="validación-del-índice" class="level2">
<h2 class="anchored" data-anchor-id="validación-del-índice">Validación del Índice:</h2>
<p>Implementación de técnicas de validación cruzada y análisis de sensibilidad para asegurar la estabilidad y reproducibilidad del índice. Las elasticidades presentadas provienen de regresiones log-log, un tipo específico de regresión lineal donde tanto la variable dependiente como la independiente se transforman mediante logaritmos. Este enfoque permite interpretar los coeficientes resultantes como elasticidades, es decir, como la proporción del cambio en la variable dependiente ante un cambio porcentual en la variable independiente.</p>
<section id="explicación-de-las-regresiones-log-log" class="level3">
<h3 class="anchored" data-anchor-id="explicación-de-las-regresiones-log-log">Explicación de las Regresiones Log-Log</h3>
<section id="transformación-de-variables" class="level4">
<h4 class="anchored" data-anchor-id="transformación-de-variables">1. Transformación de Variables</h4>
<p>En una regresión log-log, transformamos las variables de la siguiente manera:</p>
<p><span class="math display">\[ \log(Y) = \beta_0 + \beta_1 \log(X) + \epsilon \]</span></p>
<p>Donde: - $ Y $ es la variable de interés (por ejemplo, productividad, ventas, etc.). - $ X $ es el indicador de adopción de TICs (tecnologías de la información y la comunicación). - $ _0 $ es el intercepto de la regresión. - $ _1 $ es el coeficiente de la regresión, que representa la elasticidad. - $ $ es el término de error.</p>
</section>
</section>
<section id="validación-en-contraste-con-la-inversión-en-tics" class="level3">
<h3 class="anchored" data-anchor-id="validación-en-contraste-con-la-inversión-en-tics">Validación en contraste con la inversión en TICS</h3>
<p><img src="deciles_inversion.png" class="img-fluid"> <img src="elastici_inversion.png" class="img-fluid"></p>
</section>
<section id="validación-en-contraste-con-el-personal-ocupado-especialista-en-tics" class="level3">
<h3 class="anchored" data-anchor-id="validación-en-contraste-con-el-personal-ocupado-especialista-en-tics">Validación en contraste con el personal ocupado especialista en TICS</h3>
<p><img src="deciles_personal_tics.png" class="img-fluid"> <img src="elastici_personal.png" class="img-fluid"></p>
</section>
<section id="validación-en-contraste-con-la-cantidad-de-dispositivos-ocupados-para-actividades-digitales" class="level3">
<h3 class="anchored" data-anchor-id="validación-en-contraste-con-la-cantidad-de-dispositivos-ocupados-para-actividades-digitales">Validación en contraste con la cantidad de dispositivos ocupados para actividades digitales</h3>
<p><img src="deciles_dispositivos.png" class="img-fluid"> <img src="elastici_dispositivos.png" class="img-fluid"></p>
</section>
</section>
<section id="relación-con-las-tecnologiás-open-source" class="level2">
<h2 class="anchored" data-anchor-id="relación-con-las-tecnologiás-open-source">Relación con las tecnologiás open source</h2>
<p><img src="tiles_open.png" class="img-fluid"></p>
</section>
<section id="limitaciones" class="level2">
<h2 class="anchored" data-anchor-id="limitaciones">Limitaciones:</h2>
<ol type="1">
<li>Exclusión de sectores económicos no cubiertos por la ENESEM.</li>
<li>Potenciales sesgos en la respuesta y en la cobertura de la encuesta.</li>
<li>Limitaciones inherentes a los datos auto-reportados por las empresas.</li>
</ol>
</section>
<section id="aplicaciones-del-índice" class="level2">
<h2 class="anchored" data-anchor-id="aplicaciones-del-índice">Aplicaciones del Índice:</h2>
<ul>
<li>Evaluación de políticas relacionadas con la digitalización empresarial.</li>
<li>Identificación de sectores líderes y rezagados en la adopción de TIC’s.</li>
<li>Análisis de tendencias pre y post COVID-19 en la digitalización.</li>
</ul>
</section>
<section id="distribución-del-índice" class="level2">
<h2 class="anchored" data-anchor-id="distribución-del-índice">Distribución del Índice:</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="template/distribucion_indicador_mfa.png" class="img-fluid figure-img"></p>
<figcaption>Distribución del Índice en el periódo 2018-2021</figcaption>
</figure>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>